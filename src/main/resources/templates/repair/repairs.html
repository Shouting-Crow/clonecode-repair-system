<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>수리 요청 리스트</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
<div class="container">
    <h2>수리 요청 리스트</h2>
    <table class="table table-striped">
        <thead>
        <tr>
            <th>수리번호</th>
            <th>제품명</th>
            <th>시리얼 번호</th>
            <th>회원</th>
            <th>수리기사</th>
            <th>수리 날짜</th>
            <th>제품 상태</th>
            <th>수리 여부</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="repair : ${repairs}">
            <td th:text="${repair.repairId}">수리번호</td>
            <td th:text="${repair.itemName}">제품명</td>
            <td th:text="${repair.serialNumber}">시리얼번호</td>
            <td th:text="${repair.memberName}">회원</td>
            <td th:text="${repair.repairmanName}">수리기사</td>
            <td th:text="${#temporals.format(repair.bookDate, 'yyyy-MM-dd HH:mm')}">수리날짜</td>
            <td th:text="${repair.itemStatus}">제품상태</td>
            <td th:text="${repair.repairStatus}">수리여부</td>
            <td>
                <a th:href="@{/repair-request/edit/{id}(id=${repair.repairId})}"
                   th:if="${repair.repairStatus.toString()} == 'INIT'"
                   class="btn btn-primary">수정</a>
                <form th:action="@{/repair-request/cancel/{id}(id=${repair.repairId})}" method="post"
                      th:if="${repair.repairStatus.toString()} == 'INIT'" style="display:inline;">
                    <button type="submit" class="btn btn-warning">취소</button>
                </form>
                <form th:action="@{/repair-request/delete/{id}(id=${repair.repairId})}" method="post"
                      th:if="${repair.repairStatus.toString()} == 'CANCELED' or
                      ${repair.repairStatus.toString()} == 'DENIED'" style="display:inline;">
                    <button type="submit" class="btn btn-danger">삭제</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>
    <a th:href="@{/}" class="btn btn-secondary mt-3">홈으로 돌아가기</a>
</div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>